@model HeroVm
@using System.Globalization
@inject Microsoft.Extensions.Localization.IStringLocalizer<SharedResource> L

@{
    var lang = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;
    var dir = lang == "ar" ? "rtl" : "ltr";
    var textAlign = lang == "ar" ? "right" : "left";

    var defaultImg = Url.Content("~/uploads/images/school-background-pdx3rkmcq5zlpunn.jpg");
    var img = Model?.ImagePublicUrl ?? defaultImg;
    var title = Model?.Title ?? (L["Hero.Title"].Value ?? "");
    var desc = Model?.Description ?? (L["Hero.Description"].Value ?? "");
}

<section id="hero" class="hero section dark-background" style="text-align:@textAlign; direction:@dir;">
    <img src="@img" alt="" data-aos="fade-in" class="w-100" />

    <div class="container py-3">
        <h2 data-aos="fade-up" data-aos-delay="100" class="mb-3">@Html.Raw(title)</h2>
        <p data-aos="fade-up" data-aos-delay="200" class="lead">@desc</p>

        <div class="text-center my-4" data-aos="zoom-in">
            <a asp-area="Identity" asp-page="/Account/Register"
               class="btn btn-primary btn-lg px-4 py-2 rounded-pill shadow-sm"
               role="button"
               data-bs-toggle="tooltip"
               data-bs-placement="top"
               title="@L["Hero.Tooltip.RegisterButton"]"
               aria-label="@L["Hero.Tooltip.RegisterButton"]">
                <i class="fa-solid fa-user-plus me-2"></i> @L["Hero.Button"]
            </a>
        </div>

        <!-- Link Cards -->
        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 g-3 mt-3 justify-content-center">

            <!-- School -->
            <div class="col">
                <a asp-area="" asp-controller="School" asp-action="Index" class="text-decoration-none"
                   data-bs-toggle="tooltip" data-bs-placement="top"
                   title="@L["Hero.Tooltip.School"]" aria-label="@L["Hero.Tooltip.School"]">
                    <div class="card h-100 text-center shadow-sm border-0 hover-card small-card">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="text-primary icon-wrap mb-1"><i class="fa-solid fa-school"></i></div>
                            <h6 class="card-title fw-semibold text-dark mb-0 card-title-truncate">@L["Nav.AssociationSchool"]</h6>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Online School -->
            <div class="col">
                <a asp-area="" asp-controller="OnlineSchool" asp-action="Index" class="text-decoration-none"
                   data-bs-toggle="tooltip" data-bs-placement="top"
                   title="@L["Hero.Tooltip.OnlineSchool"]" aria-label="@L["Hero.Tooltip.OnlineSchool"]">
                    <div class="card h-100 text-center shadow-sm border-0 hover-card small-card">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="text-primary icon-wrap mb-1">
                                <i class="fas fa-chalkboard-teacher nav-icon"></i>
                            </div>
                            <h6 class="card-title fw-semibold text-dark mb-0 card-title-truncate">@L["Nav.OnlineSchool"]</h6>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Teachers -->
            <div class="col">
                <a asp-area="" asp-controller="Teachers" asp-action="Index" class="text-decoration-none"
                   data-bs-toggle="tooltip" data-bs-placement="top"
                   title="@L["Hero.Tooltip.Teachers"]" aria-label="@L["Hero.Tooltip.Teachers"]">
                    <div class="card h-100 text-center shadow-sm border-0 hover-card small-card">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="text-success icon-wrap mb-1"><i class="fa-solid fa-chalkboard-user"></i></div>
                            <h6 class="card-title fw-semibold text-dark mb-0 card-title-truncate">@L["Nav.Teachers"]</h6>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Recorded Courses -->
            <div class="col">
                <a asp-area="" asp-controller="PrivateCourses" asp-action="Index" class="text-decoration-none"
                   data-bs-toggle="tooltip" data-bs-placement="top"
                   title="@L["Hero.Tooltip.RecordedCourses"]" aria-label="@L["Hero.Tooltip.RecordedCourses"]">
                    <div class="card h-100 text-center shadow-sm border-0 hover-card small-card">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="text-danger icon-wrap mb-1"><i class="fa-solid fa-video"></i></div>
                            <h6 class="card-title fw-semibold text-dark mb-0 card-title-truncate">@L["Nav.RecordedCourses"]</h6>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Reactive Courses -->
            <div class="col">
                <a asp-area="" asp-controller="ReactiveCourses" asp-action="Index" class="text-decoration-none"
                   data-bs-toggle="tooltip" data-bs-placement="top"
                   title="@L["Hero.Tooltip.ReactiveCourses"]" aria-label="@L["Hero.Tooltip.ReactiveCourses"]">
                    <div class="card h-110 text-center shadow-sm border-0 hover-card small-card">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="text-warning icon-wrap mb-1"><i class="fa-solid fa-people-group"></i></div>
                            <h6 class="card-title fw-semibold text-dark mb-0 card-title-truncate">@L["Nav.ReactiveCourses"]</h6>
                        </div>
                    </div>
                </a>
            </div>

        </div>
    </div>
</section>

<style>
    /* Hover and transition effects */
    .hover-card {
        transition: transform 0.28s cubic-bezier(.2,.8,.2,1), box-shadow 0.28s;
        border-radius: 0.75rem;
    }

        .hover-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 22px rgba(0,0,0,0.12);
        }

    .icon-wrap i {
        font-size: 1.5rem !important;
        transition: transform 0.28s;
    }

    .hover-card:hover .icon-wrap i {
        transform: scale(1.05);
    }

    .small-card {
        padding: 0.45rem 0.35rem;
        min-height: 96px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .card-title-truncate {
        display: block;
        width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 1.02rem;
    }
</style>

@section Scripts {
    <script>
        (function () {
            // Initialize Bootstrap tooltips safely (no-op if bootstrap missing)
            try {
                const tooltipTriggerList = Array.prototype.slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                tooltipTriggerList.forEach(function (el) {
                    // eslint-disable-next-line no-undef
                    if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
                        new bootstrap.Tooltip(el, {
                            placement: el.getAttribute('data-bs-placement') || 'top',
                            sanitize: true
                        });
                    } else {
                        // fallback: ensure title attribute exists (screen readers / native browser tooltip)
                        // nothing to do — browsers will show title on hover/focus
                    }
                });
            } catch (ex) {
                console && console.debug && console.debug('Tooltip init failed', ex);
            }
        })();
    </script>
}




